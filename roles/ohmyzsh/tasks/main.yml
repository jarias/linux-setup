---
- name: Clone oh-my-zsh
  git: repo=https://github.com/robbyrussell/oh-my-zsh.git dest=~/.oh-my-zsh

- name: Backup ~/.zshrc
  command: mv ~/.zshrc ~/.zshrc.backup
  ignore_errors: True

- name: Copy oh-my-zsh template .zshrc
  copy: src=~/.oh-my-zsh/templates/zshrc.zsh-template dest=~/.zshrc

- name: Change oh-my-zsh plugin list
  lineinfile: dest=~/.zshrc regexp="^plugins=" line="plugins=(git git-flow-avh vagrant docker heroku)" state=present

- name: Change prompt theme
  lineinfile: dest=~/.zshrc regexp="^ZSH_THEME=" line="ZSH_THEME=\"pygmalion\"" state=present

- name: Add ~/.zshrc.local load to ~/.zshrc
  lineinfile: dest=~/.zshrc regexp="\.zshrc\.local" line=". ~/.zshrc.local" state=present

